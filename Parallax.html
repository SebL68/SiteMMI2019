<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width">
	<title></title>
	<link rel="stylesheet" href="styles/style.css">
	<style>
		body {
			font-family: arial;
			margin: 0;
		}

		section {
			height: 100vh;
			display: flex;
		}

		div {
			background: #000;
			margin: 10%;
			width: 20%;
			height: 20%;
		}
	</style>
</head>

<body>
	<section>
		<div data-speed=0.5></div>
		<div></div>
		<div data-speed=2></div>
	</section>
	<section>
		<div data-speed=0.5></div>
		<div></div>
		<div data-speed=2></div>
	</section>
	<section>
		<div data-speed=0.5></div>
		<div></div>
		<div data-speed=2></div>
	</section>
	<section>
		<div data-speed=0.5></div>
		<div></div>
		<div data-speed=2></div>
	</section>

	<script>
		var paraEl = document.querySelectorAll("[data-speed]");
		function parallax() {
			paraEl.forEach(e => {
				var rect = e.getBoundingClientRect();
				var transY = e.dataset.offset || 0;
				/* Calcule de la position d'origine du centre de la div par rapport au haut de l'écran - suppression de l'offset pour avoir la position d'origine */
				var posiOrigin = rect.top - transY + rect.height / 2;

				/* Calcule de la position par rapport au centre du viewport - application de la "vitesse" */
				var offset = (posiOrigin - window.innerHeight / 2) * e.dataset.speed;

				/* Première méthode qui pose problème pour les éléments éloignés */
				//var offset = window.scrollY * (1-e.dataset.speed);

				/* Test pour n'appliquer l'offset qu'aux éléments dans le viewport et éviter une scrollbar trop grande */
				if (rect.top < window.innerHeight ||
					offset < window.innerHeight / 2) {
					/* Sauvegarde et application de l'offset */
					e.dataset.offset = offset;
					e.style.transform = `translateY(${offset}px)`;
				}
			})
		}
		window.addEventListener("scroll", parallax, { passive: true });
		parallax();
	</script>

La même chose sans commentaire :
	<script>
		var paraEl = document.querySelectorAll("[data-speed]");
		function parallax() {
			paraEl.forEach(e => {
				var rect = e.getBoundingClientRect();
				var transY = e.dataset.offset || 0;
				var posiOrigin = rect.top - transY + rect.height / 2;
				var offset = (posiOrigin - window.innerHeight / 2) * e.dataset.speed;

				if (rect.top < window.innerHeight ||
					offset < window.innerHeight / 2) {
					e.dataset.offset = offset;
					e.style.transform = `translateY(${offset}px)`;
				}
			})
		}
		window.addEventListener("scroll", parallax, { passive: true });
		parallax();
	</script>
</body>

</html>